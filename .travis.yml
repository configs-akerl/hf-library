dist: xenial
git:
  submodules: false
env:
  global:
  - BUCKET=akerl-hf-library-config
  - CONTENT_BUCKET=akerl-hf-library
  - AWS_DEFAULT_REGION=us-east-1
  - secure: P6uw6wgUrhipXNbfLrriMuIlnGqu7MoAMgTQnoMn9S5J2X2L5a2eRVi38+oQxF5HXxnkVRcxu+j4iQAOx5eecipz2Cdnhr6PtIxzfoRteHFOO5kmBi9lVZhbz1D2CVHsoCg/atDDf5qGNJsJQkoxzhWsCzn2DQi6d9B5GiJTcmoe73ZOj9EAyuGw9Rp0BFYDQULiQcCoqj00ajX4V+2qy1LzSemCGAKcMc/nWTh8+uMWyDTrf9eHsByxccRUi+GHucUfbU4/O0L22UvTEoyE7RgMWta2uGvLLFair5iZCU6/kogeQwxS7kkKhlraB+vH5LWTDJi/CgVGu9CsjGPgy1koDJcRROerPkr/ExU/DSaXJQoQpXNk7cDJRlGQ4f41CIRp0Ej0WZTSvctXqv0vZzhUQJtsdnXrAjYz0rKQBJRZXcDHwgKU2NKoMyG10B4nv/DTB01McYKmV7eis7ab6euUVg2aHr+BJPtEkwijCErmaXNWPFxjGRLN7IIzwKEKhoaMtVePGuLv+S95wppM4r2oThZ6TFKQbTk4mWB2G8vHCa6lOhfUlEyqEj/lXNTwVnWqdbrolw3Am/oDWunbNvbZYKu3Wk1BqGw0RnWrj1WBKr4vc9ptmrJf9S+RrT7pbYiaW/4lbPKKLbWGe3nVYfOmnaqabrKib6mZdOfEukY=
  - secure: Y3ZgQfyhjZ8CcyHBigDd3XcoZmHgchdLuo1Elh6Ki+VW/JHzvUCl+40MX0azj3GoYRXb1kJFaY50RSoMTsN4wnLLgja2I658o00g7he9Zp6rHBhmLyXF7B/Gx0/yqGYWaf0o7WzHnjkkNXaDGBFQKxgpz8Rx3AsrLeLfWJdVbwGazDJiDWm6Lzu2TnGzbbUyvAzL7GtA9XVtAN2MdldUoIYErsk0qv/hSTbmgqpIY43nnoTSzLNomlnc7QFhMRWtkte0ofVI4Jr2LlcoznpVmGGzvOyaVXzrDMTLZWen4JSBbNvRnDdd6wsx1xB0l8j42fA85bnHjruoo6FWJSITr3ry11PRxrQxfUCQaf0LwBJvN0cdO5aOz61BFukttHrQD3FNVLphwM2Iva/1ND+hbXcE3xUgLZ8j5CVeiwiZjLQK6aNf3vAQLs5TEZsEVU5CBSV74bsKrkuZMmLfx175WxoJw/pEal6KAdYH3A8P1PAyGMM6N4bH89BFOF458SQGqm3x4pCNS0ABqZTFIScATiVD7zXQjSDaCfzImQUrVnMIb1Nnoj4rsiMr83pEwMC2Img8DF+PPcN7QIDte4tGftJhYTXEb48S78AHaxYIdZ7WPxjTwNh5ZbC7QHB/Bt7kyC1jXi7dQ9nhtWs4me9EHL5TV7kl28BRC7HqmxBAf88=
  - secure: Q5GELVTVTr7wLKxglAEqhIYyry7SF/8oIhp24mykx7H9pQll0djMrdDw1T4DCF7apCbSSiqOzzWrPqg/LEcUgtWU1UXq/6LDXTsTL7z0O16klmCPlQnwtxiN2O783uoLOuP7/eSdVVsjmJDJtJPZ5AcYA2D86/pQzTngOu7ID047MnRWqt3y5feFFQmTMc6MfiWaJzS6zpc3QqH6jRfyNbORajw89TKYlEnwp2N85dSUFuE26AwcYf0F0tF4pXUcYEwS5emqDrWqthlt7yiSZN4521qF+qzmBg8CqIQyARQD7y95VUDfjtFoCsfNEfpvOO2Ssbs7FMDKvzUVx3Q8PmhzZZ2q1Q4KWCwIdXpGLVLmaqzP3cELJHPc48WnBIoM/ir1Ahc6jKoNJ/zCa+BKPZ0ssq3+5DSeTqhWTi65dY12xg3K+EdU8LjhSBQnMzngtqayt5NC74reNpTy6w32S71PL0F1kXw1Mc4lgyID+Jf1VjzU/AoZzfoHtUUkTrqlbmxBovgtM1tswJH4jISuA7v4KvAIbQuJ8zRRnkkZGuZoVfHvwnZGuz2dF7Fpb+Ylm5Owak3N5RF14ke4246ahgKr48v2pG8L6A4RBYt1BsT3l5aSXsfbEt0tZoAJugKRKbTzesuvSNFtRCJXrBmyp8OCH+vg902oW6GyPMw6osI=
  - secure: oOUTbJEU+k2499tTgcKEgWLKqmIy/we3wAS5K/lbjocixH1z5Jho572LfZDCv2bpCwCx2XvlLCyY1GpW7J4H1r0K9PsffSVSEzUxmUs6n3CjBaIciPUSb+a8fYgy3aN/6RG6uGN5yc1Ni9ARRj7vhB2bJ8fSqpD4+sqbyEUgioLcZgKDrTF9RJWy6Dd47WIQm3hwsna1QQnl/DcIoiAr67KJVmdF8IOOdoDbF0KwKxxX7LpU1GxXRUoeQ9v4AADdt2zvq9NzBgAUJJAFP5QBdcWhuNjRCSJTBy/Yqz6azzRfRH+D1yOLosOZNpfkjc6SLXnreKht/OsIAO6O0pYTjbAoydxbNHdgH05PYofp+eUxSNqXvCy3OsQ1hThAVcLIbOd1xyrgJAZMNLdpY4z7MD8D65PxRQj/WSXw5rLq/tk9Qw1+IH7HtAPGuAs3XDJrN8i7VpdO+nY+l7qYWPhmwkrN6OkvsRrNdG3R9QAP9nbiKOW/vWpBjwygITYFDTsMkAR6lXZzXxLTH2iAXYNpYo1KrDXsh1EiXc/RS+RUZL3YYc025GinV/11pDAvo8g72dNF1qIbVzRW5D4J/DIMb1xFEEsX4XoryTzDaFMxUHmSHUscnLo7yzW1cNfCJF6j+IsKdee4k+bJPhOhg6w1an/kN40EuJWGEggFo+AcqEA=
  - secure: i13ywKfCwTchPa3B8duOaYnSQT2+hDqPOt2AV6cnpDBg59MsGemYmmH9l8DQ5S4jUm3ENihp62lfXzTazXdLV+xgGSIRyL2CLmITVmrx6YJj3vOhGFAgjfsx5gD7EMledVvlXtrQUuebUUWapFBYq6HhDPQa6jemJQkd3Z0Wl4ZWBnQJ7TzVXosDNrUQurpuWoMSzu0JcH5o77T3cfXLS8zuLyVMiWOXbbEYRKMw2PFbqRioC1Pv6FTrCVLe9vHauakFNIoZU3Vjs5kIB7yYYoj+kV2xZ/w3Is7npLLMYTJz/ZyIkee/RgSEXgqFSQ+epD2W1TtFW2KFjCJjNGnhjSAmu2iYk+duY/PXIFrXPapjpGVXNwKZ9BboZRgCf6RmNTyqatY/kkkAP+Z6JprDRBVc7wNMqNkkv2LzF2cPZljsESaypHlO3i+MjXBaMuXnGkfeBK+CrDChhP13iXlKFJPe+tYm977Z15HEF8bGCO5XtI2gk1WUNtcek00zqH6JgcTfHnNJD2aOvF/Mh0QWdaUcyusn3suBnAzCdJenIGnvWrLKxiQYNdMx0L8xnaQSJIv7cAWXVtmCcOIXohh22lwzVJYInzTI4VwvlNgPhlwguH9YGasCxxTSjyahpplhQ3RzjOh6IShutpktuwtYmtpnAnEFwe8NyOOYh+MmQJs=
  - secure: QT+uJ6MBOGZ0JDvYSfC+BBPscqki3jcI/lT36vAGW+YRiFJB4R9mhmkdhdqR2fA2OuhZAjdEZ0tRzgJPnuTb60+ACqsKRAJOm2akR1nUrK43rxTfy48w55dtCwXVjJOCGfKBIgmFTPTfkJUvJUDidoxutN43ZkSgMbCwcdpT587VsKVKMcCVQ9Rg9nDo+7B3xJeGIOt6RumVpk88dSdf4Ly2G7g3T3cLv5L1A2U/jJVxRJkCGTMno6mOwti8O5f0b9Q0aIqROTMcO+u1s/QsBZVzvrdBcuflcnXyOnDRqGtgyTR0fHKfPVfPPKZisv1X/hE2o3PoX4qBv3Qijq4oTyB0yXAWueQIdVS2ylfdh+NxnpoWe3KhRZmhPw2BAotzSVutfK/S4+QgCPr/CuZOIFHnxxA5wUUxXjNFj9EuUsjUAYgMH1sIj4ethDol1O5QKi8216SzfRN/vb/ZdY3cKFJDLeNqPQZbAf/prNrkPi/w29mykNZJFUy1SzxULrHeOsWFunS3Yswg3HJZpy2owE727yZ8reBYQTtq5rEi359iEEG1CMpgQN0vbBqoz/uujyRCAGJFsDhIOU2jDl6LrutOH6PTXwV1nSpzbIUl33Mg7/czIW0ZQCOf2Fcc7JsfpHrmweio78WrokcXcbI9LJu9Syj9hwBDVgf7Q/Ruax8=
  - secure: m/A7uhjkWFvG7N6sZpQxdCPFBEAYHeElimNo051NppPqwOpv5s49U0/yTzpRgpmiPo7SaPMMtlloHe0Vu2PZGG5pEnDuInEyBm3Ftx9ssm+2yfIVcQL6eCekjj88SJ5vkfEq3hLRGowBBpGSbm7DBXDecypL611KL3aS4BXsEFbBvbNhXWIvElZ1XvtHL+I0N+KWQTTMGNyO+o8Bzq3cjpvXLVtaGg0BXBt+Ir9FnaUbRtwkq3QH+HJdROVtVXiy54JjX4iSZhVb8YdqK4bDsDFiLCj3V9UENUHCa914Ey+cS2uzoXD5heQsbcrOR43YQAPiE2WyMKtg4sf+OQIBrvp3w9IvpzUN342DygdPe6saQgt0BDKEP8k2iJ7xGSZFYMBbZV3dn+cKC6Ygw1eyoZFzSK+lbNCnyL/ar+Y2u/Ga5U54h9C/OM5YE0b+MbfB2Xc3+rBmmNw5vO39C9M+u3M8fIWNviCVCQpz/9itkm2WwxSGSTBrY+Q+IbfpHrubBkZT94/6OKwgFDeQKeiyhFPX/pttCsicbxlSZ7YHaDAgWNxMy7DWSCQx2u2kjujyY4NpomH5RbhAjFcReiKB+60mmPTlUqj3iyLJGm4QL/pdQwBsAQcn5rPGZA/U4vSbO/P5Y2czuKFiJ2uJZE11EJWNqob/DGpDZYCENJS/e4U=
  - secure: R/U8opexrG340ynTgx0FdyQADjsjFBnVdOdP3PS8iXkDeInGa40DGdywpAnn47X9ePKXjazyWU/WYaabWGyn5kMckVlEtjiVQcFUVnCuydu9QNwg6TBQqXY6qa/76FszGLSouf0FT5+iCvJoo8U07G2qCdeb/VYBE/hzVxtPeM5hn5v5KgMmOKRFV0PBnU2RYXenBkdM3iGqUnqiZ095pzMBU2UIN01l0j8ZJQEuLDPY0RdwwxbNIe6BoHVSpbgUzDLZq3iaHYDRW/doDEuOzXTyRh9VUGRyNvDCSa0oEUwsaJnbGoAqkc8xn10PmsaTSynVwdupqV4KGqiXPRS0J1AuQ71gCts6E4YXJa11K3DKc7RLhtnR+wvs/o/ZUF68sPcShstasCrKA4ACvXFgqrAVA7Xhnl6FwqxDnCrSUZ6VlvP9lsD52olWIEgMJKZ8EwbFzQqADVDmjWW0RbOxDzwgW63IwGTIj1FsRKmiGfie5eV/TjF0W45W9O458iR/cS+LtndrCgXp400+T55gz7bcUrn0o0CdzPZBHF+1zNMJrhLuUKiYWhGUmP9HEZu+Sv8pZR9DhdUwcmp9GHln/nbGV1ynhDLxz4kt5OHQTU9fBwtyuX3QgshUWiDD2mowT8fnFswgiDE2VsQpljSRqO8P5a4fxAqmZq7YW/LsTKw=
  - secure: P6z89kvZoS8QwipIRahMQZHnzuG8MUG6GiTSC1Crz5FXwz5vSZ24Zwu3OQPwu0X8LF9EoWPOSynEf0b9euH84jBzgOmpTj5eMskPYTiJsLyofKCtlSB8JfAULErZkfy6X1k6wDPQmMoyd0n57pf3xCFmj0n7d8Vv8F+8npDMnc/Nq21HBNs+CKP0HkhHScYPY+RAPYy6oSN8WNQzj8OlkgX6dSgkNO06MivsFDs9udECW+EkU0qpplkcRSGF6KfY3wL7zxzZ9HET474qORc8vQg7SpeFK/ApZpfhoSxS1WO372JDJFMOeDoEHhMvPT4c/EPHhSTPHU0g5rpHSYV0NHLNov4p7a1GBCInww6U96G+9fws4sI46goyAaO1Hgzy7JGQqLwr/6+qu0GKnx77tYFmzTeeqQ4sN2XNmhtKWjCWPhKP1pa9L4qWGqr+6hOV3t90BWBQafM+aZVVhHaSU+YzE4r9ODWLhFcB4yWagM1HzJhily9kNGOja9M59AIhz3Cj+h0bXMVy9N9SfwSAfoprcR36kK6we0nB0H6qtAfZoSHq8a2D91x8VrxCRCo2cMhU4DYQsXoVhNilIeoVGbzRT5d+6AR4yZYSCy9WhWSDy5LobjI7Wox+Wn1gYqyiNd7p85c6Y8a3XEi36yXusGiLgYnmuN2unV//7yzQrS8=
  - secure: NneVRsGHxNBMAYn7GnHimvnGzEH7bYgM0rIduC2/WLkovqeXB5Dg1sQaYiRT4R1jNUemmbkm1eKg84vU5MuNSu6lSx4m8j0BEQ41rwz09V4jgXtsclS8a1h4g+8XNHbIWawTBAGH4FK8oMuBM9x7JpxSQy6eqZRk2CDUzPhLhIarS1vntNf5+8rgNsCeeW5VeV7huK8i/h+cGQ5sUu8ZSigzTHzgvA1/VblaGwluKAVYUzFTIqj9mX4aCrDgyHCOt6CU87dYsfysU5B0Y+Oa7nwd0uT4lrzcpuKbPr9LEmAVen84z7Jfrr9GbgugoWpo67304s7TP2EhM9GiqBVKVDL4mE0XcMKCSf4kVhwNiH+67SfncX3//BSaJCtdzhYHosYLQwmRPFflp0farNtZL1I2CcSywo6/xII91gICKx+37noDMijKMo2qc9Ca/9jeHVN77Qv4IN8hy4fh3JcydiNpPD/82BPbndJVYvkl5C3BrMLQ5uNFg6eRDf+o04zIqUgpf/aO8sSZntUavhPvsJkaiRgQAPkmR30q+iHqU74rXWU7h1yMBGMh00W9n5Jhas7A/xzci+uyYONUAj9N9pmEHfRJGzVdAg4Ecdog2T/l/Vn9aiuSaAeEabGFzeJokrM8K2locMLuiIhNlXAb/R5wLseVZdV5/yw4md+5a2s=
  - secure: nRihD5dqwn5cdiRfX/yED4r+RWC43+DZEfgQzgGF6i7Jygv89NObo9unpD40CXNKLpaWXz2INdKR4XxGn8wGDQ+JDoGH4pV3u3cagFPwDSFmeaTezT+ilsmHN7fJhf469zUbnWatuSOVj6U04jYik/YPaNNeNFdxxu4LCGMR1Z6NrQ32iTrFybhcCSiZnBPnUpr7zsH4O09GC+4c9//IJIv+qks/YN+tqaVbiFTMISemuQ5unChuMXmQ8ar3J0paNld1EGG9n7R0jy+SJg/xkcjQ1c146g51Yzuht9FOyutnFupEx8zNddkx71xnWwIb7BoCdDn2Hj1AjH/N3fArZyj0vloPmoEsdLNT8e+99NnvJkHCwjwNu+aANDJ4d7mfdKTJlUOZxZ1ip5PXAYJZYZjSml3OaDsz4p9gbxjYAavBBfYDYPW2iK1oxRjx/uhylZfKcyOz7HtRgHNn+gOpgOp8ZXHA9wkrhGBj1LU4qXSRZa+ffhHckt87Z57jSdiwRtw7qkgQ+BuM5h1uHNEESWXNIKxSLOCl/A3X7hjMR3ov5XWoV9bqCl4yq30sCCDMwJlIP5stqdxF2wAjr6Azrq73l7GDi+xBjUI4MCw47ZTecgIFNPxkFc6ShwdmnIErygKaEpd4jpuBuCETj8a8aOmGmD1mJZHW53mqnm/Zlyk=
before_install:
- openssl aes-256-cbc -K $encrypted_a11fe1fa81bf_key -iv $encrypted_a11fe1fa81bf_iv
  -in deploy_key.enc -out deploy_key -d
- chmod 600 deploy_key
- echo "IdentityFile deploy_key" >> ~/.ssh/config
- git submodule update --init
- scripts/deps.sh
- go get github.com/akerl/madlibrarian
script:
- scripts/template.py config.yaml.j2 config.yaml
- scripts/upload.sh config.yaml
- "./upload_content.rb"
notifications:
  email: false
  slack:
    secure: qBgP3WpaocPHtt45/03YmYDGENgzBM+9P4PJecn8ARNaPDoqX4ZmSjrma5XPzPXveDZ1Y/iUJ9c+x4MlClDtS+HiLSHeOAzZQS7DvCQfVUPP/tjie1UhPIq5l19saVkBU6CExs3aly0bgKM7C2tqx18CxbGx/6oluUyYZgHQFqRPhyTV7VWDM1AhfYm8c3uMYbSIMVggVxyFgcEmCESEo4XIUPbw9O74J/w9CUPGNdKBjrLt91fxM7gLuzBRs6wgAyspC6qkIMI8gY1l6TaiDhebU+kuz0ayk9N/RbHno2/fLkYF6Kp0EqnIOyVTcWdeMRzmAsh1qD7BjfPAI+J7cVM4diVYjIKIV1PdIq2Ek5tJUnr+FB2L0AlSj7hkzHnTLmvLO7U9SjaiYaxrCM5hQdu+oVAFxqvFnMZIK0WKM9nRo3MwiX1KLh5B2UmgFId1rlfs4by7Ba/am/0MvmXp7VvlCNEDuwbQWnJUNXdbmkzolw9w1KSuV4jA20EPflr2SMXx+93rqtv8qMXP5miRwPqQddqFBUtbUKWCNuLvP5WRYxCsQ76FiDh03lce/3GVBnSzj+JsuJHgtjPjb7uFH/A8dxQrlkY7fv2xoFpj63YIDLfqjMkK0p3Pl0esNl8nvJnzMjWDVjt7/Wrw9L3dI/kEGYe3fvdfKp5503itR88=
